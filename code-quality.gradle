checkstyle {
    toolVersion '7.8.1'
    configFile file("config/checkstyle/checkstyle.xml")
}

checkstyleMain {
    source ='src/main/java'
}

checkstyleTest {
    source ='src/test/java'
}

spotbugs {
    excludeFilter = new File("config/spotbugs/spotbugs-exclude.xml")
}

spotbugsMain {
    reports {
        html {
            enabled = true
            destination = file("$buildDir/reports/spotbugs/main/spotbugs.html")
            stylesheet = 'fancy-hist.xsl'
        }
    }
}

pmd {
    toolVersion = "6.25.0"
    ruleSets = ["$projectDir/config/pmd/pmd-ruleset.xml"]
}

/** ########### JACOCO CONFIGURATION  **/

ext['basePackage'] = 'io/mercadolibre'

jacocoTestReport {
    reports {
        xml {
            enabled true 
        }

        html {
            enabled true
        }
    }
    afterEvaluate  {
    	classDirectories.from = files(classDirectories.files.collect {
            fileTree(dir: it,
                    exclude: [ "${basePackage}/crosscutting/config/**",
                    		   "${basePackage}/crosscutting/domain/**",
                    		   "${basePackage}/crosscutting/domain/constants/**",
                    		   "${basePackage}/crosscutting/exceptions/**",
                    		   "${basePackage}/crosscutting/stereotypes/**",
							   "${basePackage}/main/Application*"
							   ])
        })
    }
}